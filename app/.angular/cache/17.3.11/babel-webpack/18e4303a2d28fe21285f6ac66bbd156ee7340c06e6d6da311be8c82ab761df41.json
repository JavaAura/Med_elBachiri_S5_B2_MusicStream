{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport * as TrackActions from '../../../../core/store/track/track.actions';\nimport * as fromTrack from '../../../../core/store/track/track.selectors';\nlet LibraryComponent = class LibraryComponent {\n  constructor(store, router, dialog) {\n    this.store = store;\n    this.router = router;\n    this.dialog = dialog;\n    this.searchTerm = '';\n    this.selectedCategory = '';\n    this.tracks$ = this.store.select(fromTrack.selectAllTracks);\n    this.loading$ = this.store.select(fromTrack.selectLoading);\n    this.setupFilteredTracks();\n    this.currentTrack$ = this.store.select(fromTrack.selectCurrentTrack);\n    this.playbackState$ = this.store.select(fromTrack.selectPlaybackState);\n  }\n  setupFilteredTracks() {\n    this.filteredTracks$ = this.tracks$.pipe(map(tracks => {\n      return tracks.filter(track => {\n        const matchesSearch = this.searchTerm.toLowerCase() === '' || track.title.toLowerCase().includes(this.searchTerm.toLowerCase()) || track.artist.toLowerCase().includes(this.searchTerm.toLowerCase());\n        const matchesCategory = this.selectedCategory === '' || track.category === this.selectedCategory;\n        return matchesSearch && matchesCategory;\n      });\n    }));\n  }\n  ngOnInit() {\n    this.store.dispatch(TrackActions.loadTracks());\n  }\n  onSearch(term) {\n    this.searchTerm = term;\n    this.setupFilteredTracks();\n  }\n  onCategoryChange(category) {\n    this.selectedCategory = category;\n    this.setupFilteredTracks();\n  }\n  playTrack(track) {\n    this.store.dispatch(TrackActions.playTrack({\n      track\n    }));\n  }\n  viewTrackDetails(track) {\n    this.router.navigate(['/track', track.id]);\n  }\n  openAddTrackDialog() {\n    // This is handled by the AddTrackButton component\n  }\n};\nLibraryComponent = __decorate([Component({\n  selector: 'app-library',\n  standalone: false,\n  templateUrl: './library.component.html'\n})], LibraryComponent);\nexport { LibraryComponent };","map":{"version":3,"names":["Component","map","TrackActions","fromTrack","LibraryComponent","constructor","store","router","dialog","searchTerm","selectedCategory","tracks$","select","selectAllTracks","loading$","selectLoading","setupFilteredTracks","currentTrack$","selectCurrentTrack","playbackState$","selectPlaybackState","filteredTracks$","pipe","tracks","filter","track","matchesSearch","toLowerCase","title","includes","artist","matchesCategory","category","ngOnInit","dispatch","loadTracks","onSearch","term","onCategoryChange","playTrack","viewTrackDetails","navigate","id","openAddTrackDialog","__decorate","selector","standalone","templateUrl"],"sources":["/home/exshy/Documents/GitHub/Briefs/Angular/MusicStream/app/src/app/features/library/pages/library/library.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Track } from '../../../../core/models/track.model';\nimport * as TrackActions from '../../../../core/store/track/track.actions';\nimport * as fromTrack from '../../../../core/store/track/track.selectors';\nimport { PlaybackState } from '../../../../core/models/track.model';\nimport { DialogService } from 'src/app/shared/services/dialog.service';\n\n@Component({\n  selector: 'app-library',\n  standalone: false,\n  templateUrl: './library.component.html'\n})\nexport class LibraryComponent implements OnInit {\n  tracks$: Observable<Track[]>;\n  filteredTracks$!: Observable<Track[]>;\n  loading$: Observable<boolean>;\n  searchTerm = '';\n  selectedCategory = '';\n  currentTrack$: Observable<Track | null>;\n  playbackState$: Observable<PlaybackState>;\n\n  constructor(\n    private store: Store,\n    private router: Router,\n    private dialog: DialogService\n  ) {\n    this.tracks$ = this.store.select(fromTrack.selectAllTracks);\n    this.loading$ = this.store.select(fromTrack.selectLoading);\n    this.setupFilteredTracks();\n    this.currentTrack$ = this.store.select(fromTrack.selectCurrentTrack);\n    this.playbackState$ = this.store.select(fromTrack.selectPlaybackState);\n  }\n\n  private setupFilteredTracks() {\n    this.filteredTracks$ = this.tracks$.pipe(\n      map(tracks => {\n        return tracks.filter(track => {\n          const matchesSearch = this.searchTerm.toLowerCase() === '' ||\n            track.title.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n            track.artist.toLowerCase().includes(this.searchTerm.toLowerCase());\n\n          const matchesCategory = this.selectedCategory === '' ||\n            track.category === this.selectedCategory;\n\n          return matchesSearch && matchesCategory;\n        });\n      })\n    );\n  }\n\n  ngOnInit() {\n    this.store.dispatch(TrackActions.loadTracks());\n  }\n\n  onSearch(term: string) {\n    this.searchTerm = term;\n    this.setupFilteredTracks();\n  }\n\n  onCategoryChange(category: string) {\n    this.selectedCategory = category;\n    this.setupFilteredTracks();\n  }\n\n  playTrack(track: Track) {\n    this.store.dispatch(TrackActions.playTrack({ track }));\n  }\n\n  viewTrackDetails(track: Track) {\n    this.router.navigate(['/track', track.id]);\n  }\n\n  openAddTrackDialog() {\n    // This is handled by the AddTrackButton component\n  }\n} "],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAIjD,SAASC,GAAG,QAAQ,gBAAgB;AAEpC,OAAO,KAAKC,YAAY,MAAM,4CAA4C;AAC1E,OAAO,KAAKC,SAAS,MAAM,8CAA8C;AASlE,IAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAS3BC,YACUC,KAAY,EACZC,MAAc,EACdC,MAAqB;IAFrB,KAAAF,KAAK,GAALA,KAAK;IACL,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,MAAM,GAANA,MAAM;IARhB,KAAAC,UAAU,GAAG,EAAE;IACf,KAAAC,gBAAgB,GAAG,EAAE;IASnB,IAAI,CAACC,OAAO,GAAG,IAAI,CAACL,KAAK,CAACM,MAAM,CAACT,SAAS,CAACU,eAAe,CAAC;IAC3D,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACR,KAAK,CAACM,MAAM,CAACT,SAAS,CAACY,aAAa,CAAC;IAC1D,IAAI,CAACC,mBAAmB,EAAE;IAC1B,IAAI,CAACC,aAAa,GAAG,IAAI,CAACX,KAAK,CAACM,MAAM,CAACT,SAAS,CAACe,kBAAkB,CAAC;IACpE,IAAI,CAACC,cAAc,GAAG,IAAI,CAACb,KAAK,CAACM,MAAM,CAACT,SAAS,CAACiB,mBAAmB,CAAC;EACxE;EAEQJ,mBAAmBA,CAAA;IACzB,IAAI,CAACK,eAAe,GAAG,IAAI,CAACV,OAAO,CAACW,IAAI,CACtCrB,GAAG,CAACsB,MAAM,IAAG;MACX,OAAOA,MAAM,CAACC,MAAM,CAACC,KAAK,IAAG;QAC3B,MAAMC,aAAa,GAAG,IAAI,CAACjB,UAAU,CAACkB,WAAW,EAAE,KAAK,EAAE,IACxDF,KAAK,CAACG,KAAK,CAACD,WAAW,EAAE,CAACE,QAAQ,CAAC,IAAI,CAACpB,UAAU,CAACkB,WAAW,EAAE,CAAC,IACjEF,KAAK,CAACK,MAAM,CAACH,WAAW,EAAE,CAACE,QAAQ,CAAC,IAAI,CAACpB,UAAU,CAACkB,WAAW,EAAE,CAAC;QAEpE,MAAMI,eAAe,GAAG,IAAI,CAACrB,gBAAgB,KAAK,EAAE,IAClDe,KAAK,CAACO,QAAQ,KAAK,IAAI,CAACtB,gBAAgB;QAE1C,OAAOgB,aAAa,IAAIK,eAAe;MACzC,CAAC,CAAC;IACJ,CAAC,CAAC,CACH;EACH;EAEAE,QAAQA,CAAA;IACN,IAAI,CAAC3B,KAAK,CAAC4B,QAAQ,CAAChC,YAAY,CAACiC,UAAU,EAAE,CAAC;EAChD;EAEAC,QAAQA,CAACC,IAAY;IACnB,IAAI,CAAC5B,UAAU,GAAG4B,IAAI;IACtB,IAAI,CAACrB,mBAAmB,EAAE;EAC5B;EAEAsB,gBAAgBA,CAACN,QAAgB;IAC/B,IAAI,CAACtB,gBAAgB,GAAGsB,QAAQ;IAChC,IAAI,CAAChB,mBAAmB,EAAE;EAC5B;EAEAuB,SAASA,CAACd,KAAY;IACpB,IAAI,CAACnB,KAAK,CAAC4B,QAAQ,CAAChC,YAAY,CAACqC,SAAS,CAAC;MAAEd;IAAK,CAAE,CAAC,CAAC;EACxD;EAEAe,gBAAgBA,CAACf,KAAY;IAC3B,IAAI,CAAClB,MAAM,CAACkC,QAAQ,CAAC,CAAC,QAAQ,EAAEhB,KAAK,CAACiB,EAAE,CAAC,CAAC;EAC5C;EAEAC,kBAAkBA,CAAA;IAChB;EAAA;CAEH;AA/DYvC,gBAAgB,GAAAwC,UAAA,EAL5B5C,SAAS,CAAC;EACT6C,QAAQ,EAAE,aAAa;EACvBC,UAAU,EAAE,KAAK;EACjBC,WAAW,EAAE;CACd,CAAC,C,EACW3C,gBAAgB,CA+D5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}