{"ast":null,"code":"import * as TrackActions from '../../../core/store/track/track.actions';\nimport * as fromTrack from '../../../core/store/track/track.selectors';\nimport { formatTime } from '../../utils/format-time';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/common\";\nfunction PlayerComponent_img_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 26);\n    i0.ɵɵpipe(1, \"async\");\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", (tmp_1_0 = i0.ɵɵpipeBind1(1, 1, ctx_r0.currentTrack$)) == null ? null : tmp_1_0.coverImage, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PlayerComponent__svg_svg_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 27);\n    i0.ɵɵelement(1, \"path\", 28);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerComponent__svg_svg_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 27);\n    i0.ɵɵelement(1, \"path\", 29);\n    i0.ɵɵelementEnd();\n  }\n}\nexport class PlayerComponent {\n  constructor(store) {\n    this.store = store;\n    this.formatTime = formatTime;\n    this.currentTrack$ = this.store.select(fromTrack.selectCurrentTrack);\n    this.playbackState$ = this.store.select(fromTrack.selectPlaybackState);\n    this.hasPreviousTrack$ = this.store.select(fromTrack.selectHasPreviousTrack);\n    this.hasNextTrack$ = this.store.select(fromTrack.selectHasNextTrack);\n  }\n  togglePlayPause() {\n    this.store.select(fromTrack.selectCurrentTrack).subscribe(track => {\n      if (track) {\n        if (this.playbackState$) {\n          this.store.dispatch(TrackActions.pauseTrack());\n        } else {\n          this.store.dispatch(TrackActions.playTrack({\n            track\n          }));\n        }\n      }\n    }).unsubscribe();\n  }\n  onProgressClick(event) {\n    const element = event.currentTarget;\n    const rect = element.getBoundingClientRect();\n    const ratio = (event.clientX - rect.left) / rect.width;\n    this.playbackState$.subscribe(state => {\n      if (state.duration) {\n        this.store.dispatch(TrackActions.updateProgress({\n          currentTime: ratio * state.duration,\n          duration: state.duration\n        }));\n      }\n    }).unsubscribe();\n  }\n  onVolumeClick(event) {\n    const element = event.currentTarget;\n    const rect = element.getBoundingClientRect();\n    const ratio = (event.clientX - rect.left) / rect.width;\n    this.store.dispatch(TrackActions.setVolume({\n      volume: Math.max(0, Math.min(1, ratio))\n    }));\n  }\n  getProgress(current, total) {\n    return total ? current / total * 100 : 0;\n  }\n  previousTrack() {\n    this.store.dispatch(TrackActions.previousTrack());\n  }\n  nextTrack() {\n    this.store.dispatch(TrackActions.nextTrack());\n  }\n  static {\n    this.ɵfac = function PlayerComponent_Factory(t) {\n      return new (t || PlayerComponent)(i0.ɵɵdirectiveInject(i1.Store));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PlayerComponent,\n      selectors: [[\"app-player\"]],\n      decls: 51,\n      vars: 53,\n      consts: [[1, \"fixed\", \"bottom-0\", \"w-full\", \"bg-surface\", \"border-t\", \"border-gray-700\", \"p-4\"], [1, \"container\", \"mx-auto\", \"flex\", \"items-center\", \"justify-between\"], [1, \"flex\", \"items-center\", \"space-x-4\", \"w-1/4\"], [1, \"w-14\", \"h-14\", \"bg-gray-700\", \"rounded\"], [\"class\", \"w-full h-full object-cover rounded\", \"alt\", \"Cover\", 3, \"src\", 4, \"ngIf\"], [1, \"truncate\"], [1, \"font-medium\", \"truncate\"], [1, \"text-sm\", \"text-gray-400\", \"truncate\"], [1, \"flex\", \"flex-col\", \"items-center\", \"w-2/4\"], [1, \"flex\", \"items-center\", \"space-x-6\"], [1, \"text-gray-400\", \"hover:text-white\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"h-6\", \"w-6\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 19l-7-7 7-7\"], [1, \"bg-white\", \"rounded-full\", \"p-2\", \"hover:scale-105\", \"transition-transform\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"class\", \"h-8 w-8 text-black\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 4, \"ngIf\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M9 5l7 7-7 7\"], [1, \"w-full\", \"mt-2\", \"flex\", \"items-center\", \"space-x-3\"], [1, \"text-xs\", \"text-gray-400\"], [1, \"flex-1\", \"h-2\", \"bg-gray-700\", \"rounded-full\", \"cursor-pointer\", \"relative\", \"group\", 3, \"click\"], [1, \"absolute\", \"inset-y-0\", \"left-0\", \"bg-primary\", \"rounded-full\", \"transition-all\"], [1, \"absolute\", \"inset-y-0\", \"w-3\", \"h-3\", \"bg-white\", \"rounded-full\", \"opacity-0\", \"group-hover:opacity-100\", \"transition-opacity\"], [1, \"flex\", \"items-center\", \"space-x-2\", \"ml-4\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 20 20\", \"fill\", \"currentColor\", 1, \"h-5\", \"w-5\", \"text-gray-400\"], [\"fill-rule\", \"evenodd\", \"d\", \"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 12a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 12c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 12a5.983 5.983 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 12a3.984 3.984 0 00-1.172-2.828 1 1 0 010-1.415z\", \"clip-rule\", \"evenodd\"], [1, \"w-24\", \"h-2\", \"bg-gray-700\", \"rounded-full\", \"cursor-pointer\", \"relative\", \"group\", 3, \"click\"], [1, \"absolute\", \"inset-y-0\", \"left-0\", \"bg-primary\", \"rounded-full\"], [\"alt\", \"Cover\", 1, \"w-full\", \"h-full\", \"object-cover\", \"rounded\", 3, \"src\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"h-8\", \"w-8\", \"text-black\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M10 9v6m4-6v6\"]],\n      template: function PlayerComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n          i0.ɵɵtemplate(4, PlayerComponent_img_4_Template, 2, 3, \"img\", 4);\n          i0.ɵɵpipe(5, \"async\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 5)(7, \"h4\", 6);\n          i0.ɵɵtext(8);\n          i0.ɵɵpipe(9, \"async\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"p\", 7);\n          i0.ɵɵtext(11);\n          i0.ɵɵpipe(12, \"async\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(13, \"div\", 8)(14, \"div\", 9)(15, \"button\", 10);\n          i0.ɵɵpipe(16, \"async\");\n          i0.ɵɵlistener(\"click\", function PlayerComponent_Template_button_click_15_listener() {\n            return ctx.previousTrack();\n          });\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(17, \"svg\", 11);\n          i0.ɵɵelement(18, \"path\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(19, \"button\", 13);\n          i0.ɵɵpipe(20, \"async\");\n          i0.ɵɵlistener(\"click\", function PlayerComponent_Template_button_click_19_listener() {\n            return ctx.togglePlayPause();\n          });\n          i0.ɵɵtemplate(21, PlayerComponent__svg_svg_21_Template, 2, 0, \"svg\", 14);\n          i0.ɵɵpipe(22, \"async\");\n          i0.ɵɵtemplate(23, PlayerComponent__svg_svg_23_Template, 2, 0, \"svg\", 14);\n          i0.ɵɵpipe(24, \"async\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"button\", 10);\n          i0.ɵɵpipe(26, \"async\");\n          i0.ɵɵlistener(\"click\", function PlayerComponent_Template_button_click_25_listener() {\n            return ctx.nextTrack();\n          });\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(27, \"svg\", 11);\n          i0.ɵɵelement(28, \"path\", 15);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(29, \"div\", 16)(30, \"span\", 17);\n          i0.ɵɵtext(31);\n          i0.ɵɵpipe(32, \"async\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"div\", 18);\n          i0.ɵɵlistener(\"click\", function PlayerComponent_Template_div_click_33_listener($event) {\n            return ctx.onProgressClick($event);\n          });\n          i0.ɵɵelement(34, \"div\", 19);\n          i0.ɵɵpipe(35, \"async\");\n          i0.ɵɵpipe(36, \"async\");\n          i0.ɵɵelement(37, \"div\", 20);\n          i0.ɵɵpipe(38, \"async\");\n          i0.ɵɵpipe(39, \"async\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(40, \"span\", 17);\n          i0.ɵɵtext(41);\n          i0.ɵɵpipe(42, \"async\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(43, \"div\", 21);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(44, \"svg\", 22);\n          i0.ɵɵelement(45, \"path\", 23);\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(46, \"div\", 24);\n          i0.ɵɵlistener(\"click\", function PlayerComponent_Template_div_click_46_listener($event) {\n            return ctx.onVolumeClick($event);\n          });\n          i0.ɵɵelement(47, \"div\", 25);\n          i0.ɵɵpipe(48, \"async\");\n          i0.ɵɵelement(49, \"div\", 20);\n          i0.ɵɵpipe(50, \"async\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          let tmp_0_0;\n          let tmp_1_0;\n          let tmp_2_0;\n          let tmp_5_0;\n          let tmp_6_0;\n          let tmp_8_0;\n          let tmp_9_0;\n          let tmp_10_0;\n          let tmp_11_0;\n          let tmp_12_0;\n          let tmp_13_0;\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = i0.ɵɵpipeBind1(5, 21, ctx.currentTrack$)) == null ? null : tmp_0_0.coverImage);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" \", ((tmp_1_0 = i0.ɵɵpipeBind1(9, 23, ctx.currentTrack$)) == null ? null : tmp_1_0.title) || \"No track selected\", \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\" \", ((tmp_2_0 = i0.ɵɵpipeBind1(12, 25, ctx.currentTrack$)) == null ? null : tmp_2_0.artist) || \"\", \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵclassProp(\"opacity-50\", !i0.ɵɵpipeBind1(16, 27, ctx.hasPreviousTrack$));\n          i0.ɵɵadvance(4);\n          i0.ɵɵclassProp(\"opacity-50\", !i0.ɵɵpipeBind1(20, 29, ctx.currentTrack$));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", !((tmp_5_0 = i0.ɵɵpipeBind1(22, 31, ctx.playbackState$)) == null ? null : tmp_5_0.isPlaying));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", (tmp_6_0 = i0.ɵɵpipeBind1(24, 33, ctx.playbackState$)) == null ? null : tmp_6_0.isPlaying);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"opacity-50\", !i0.ɵɵpipeBind1(26, 35, ctx.hasNextTrack$));\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\" \", ctx.formatTime(((tmp_8_0 = i0.ɵɵpipeBind1(32, 37, ctx.playbackState$)) == null ? null : tmp_8_0.currentTime) || 0), \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵstyleProp(\"width\", ctx.getProgress(((tmp_9_0 = i0.ɵɵpipeBind1(35, 39, ctx.playbackState$)) == null ? null : tmp_9_0.currentTime) || 0, ((tmp_9_0 = i0.ɵɵpipeBind1(36, 41, ctx.playbackState$)) == null ? null : tmp_9_0.duration) || 0), \"%\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵstyleProp(\"left\", ctx.getProgress(((tmp_10_0 = i0.ɵɵpipeBind1(38, 43, ctx.playbackState$)) == null ? null : tmp_10_0.currentTime) || 0, ((tmp_10_0 = i0.ɵɵpipeBind1(39, 45, ctx.playbackState$)) == null ? null : tmp_10_0.duration) || 0), \"%\");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" \", ctx.formatTime(((tmp_11_0 = i0.ɵɵpipeBind1(42, 47, ctx.playbackState$)) == null ? null : tmp_11_0.duration) || 0), \" \");\n          i0.ɵɵadvance(6);\n          i0.ɵɵstyleProp(\"width\", (((tmp_12_0 = i0.ɵɵpipeBind1(48, 49, ctx.playbackState$)) == null ? null : tmp_12_0.volume) || 0) * 100, \"%\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵstyleProp(\"left\", (((tmp_13_0 = i0.ɵɵpipeBind1(50, 51, ctx.playbackState$)) == null ? null : tmp_13_0.volume) || 0) * 100, \"%\");\n        }\n      },\n      dependencies: [i2.NgIf, i2.AsyncPipe],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["TrackActions","fromTrack","formatTime","i0","ɵɵelement","ɵɵproperty","tmp_1_0","ɵɵpipeBind1","ctx_r0","currentTrack$","coverImage","ɵɵsanitizeUrl","ɵɵelementStart","ɵɵelementEnd","PlayerComponent","constructor","store","select","selectCurrentTrack","playbackState$","selectPlaybackState","hasPreviousTrack$","selectHasPreviousTrack","hasNextTrack$","selectHasNextTrack","togglePlayPause","subscribe","track","dispatch","pauseTrack","playTrack","unsubscribe","onProgressClick","event","element","currentTarget","rect","getBoundingClientRect","ratio","clientX","left","width","state","duration","updateProgress","currentTime","onVolumeClick","setVolume","volume","Math","max","min","getProgress","current","total","previousTrack","nextTrack","ɵɵdirectiveInject","i1","Store","selectors","decls","vars","consts","template","PlayerComponent_Template","rf","ctx","ɵɵtemplate","PlayerComponent_img_4_Template","ɵɵtext","ɵɵlistener","PlayerComponent_Template_button_click_15_listener","PlayerComponent_Template_button_click_19_listener","PlayerComponent__svg_svg_21_Template","PlayerComponent__svg_svg_23_Template","PlayerComponent_Template_button_click_25_listener","PlayerComponent_Template_div_click_33_listener","$event","PlayerComponent_Template_div_click_46_listener","ɵɵadvance","tmp_0_0","ɵɵtextInterpolate1","title","tmp_2_0","artist","ɵɵclassProp","tmp_5_0","isPlaying","tmp_6_0","tmp_8_0","ɵɵstyleProp","tmp_9_0","tmp_10_0","tmp_11_0","tmp_12_0","tmp_13_0"],"sources":["/home/exshy/Documents/GitHub/Briefs/Angular/MusicStream/cursor_app/src/app/shared/components/player/player.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { Observable, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Track } from '../../../core/models/track.model';\nimport * as TrackActions from '../../../core/store/track/track.actions';\nimport * as fromTrack from '../../../core/store/track/track.selectors';\nimport { formatTime } from '../../utils/format-time';\n\n@Component({\n  selector: 'app-player',\n  template: `\n    <div class=\"fixed bottom-0 w-full bg-surface border-t border-gray-700 p-4\">\n      <div class=\"container mx-auto flex items-center justify-between\">\n        <!-- Track Info -->\n        <div class=\"flex items-center space-x-4 w-1/4\">\n          <div class=\"w-14 h-14 bg-gray-700 rounded\">\n            <img \n              *ngIf=\"(currentTrack$ | async)?.coverImage\"\n              [src]=\"(currentTrack$ | async)?.coverImage\"\n              class=\"w-full h-full object-cover rounded\"\n              alt=\"Cover\"\n            >\n          </div>\n          <div class=\"truncate\">\n            <h4 class=\"font-medium truncate\">\n              {{ (currentTrack$ | async)?.title || 'No track selected' }}\n            </h4>\n            <p class=\"text-sm text-gray-400 truncate\">\n              {{ (currentTrack$ | async)?.artist || '' }}\n            </p>\n          </div>\n        </div>\n\n        <!-- Player Controls -->\n        <div class=\"flex flex-col items-center w-2/4\">\n          <div class=\"flex items-center space-x-6\">\n            <button \n              class=\"text-gray-400 hover:text-white\"\n              (click)=\"previousTrack()\"\n              [class.opacity-50]=\"!(hasPreviousTrack$ | async)\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n            <button \n              class=\"bg-white rounded-full p-2 hover:scale-105 transition-transform\"\n              (click)=\"togglePlayPause()\"\n              [class.opacity-50]=\"!(currentTrack$ | async)\"\n            >\n              <svg *ngIf=\"!(playbackState$ | async)?.isPlaying\" xmlns=\"http://www.w3.org/2000/svg\" class=\"h-8 w-8 text-black\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\n              </svg>\n              <svg *ngIf=\"(playbackState$ | async)?.isPlaying\" xmlns=\"http://www.w3.org/2000/svg\" class=\"h-8 w-8 text-black\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 9v6m4-6v6\" />\n              </svg>\n            </button>\n            <button \n              class=\"text-gray-400 hover:text-white\"\n              (click)=\"nextTrack()\"\n              [class.opacity-50]=\"!(hasNextTrack$ | async)\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\n              </svg>\n            </button>\n          </div>\n          \n          <!-- Progress Bar -->\n          <div class=\"w-full mt-2 flex items-center space-x-3\">\n            <span class=\"text-xs text-gray-400\">\n              {{ formatTime((playbackState$ | async)?.currentTime || 0) }}\n            </span>\n            <div \n              class=\"flex-1 h-2 bg-gray-700 rounded-full cursor-pointer relative group\"\n              (click)=\"onProgressClick($event)\"\n            >\n              <div \n                class=\"absolute inset-y-0 left-0 bg-primary rounded-full transition-all\"\n                [style.width.%]=\"getProgress((playbackState$ | async)?.currentTime || 0, (playbackState$ | async)?.duration || 0)\"\n              ></div>\n              <div class=\"absolute inset-y-0 w-3 h-3 bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                   [style.left.%]=\"getProgress((playbackState$ | async)?.currentTime || 0, (playbackState$ | async)?.duration || 0)\">\n              </div>\n            </div>\n            <span class=\"text-xs text-gray-400\">\n              {{ formatTime((playbackState$ | async)?.duration || 0) }}\n            </span>\n          </div>\n        </div>\n\n        <!-- Volume Control -->\n        <div class=\"flex items-center space-x-2 ml-4\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5 text-gray-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path fill-rule=\"evenodd\" d=\"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 12a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 12c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 12a5.983 5.983 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 12a3.984 3.984 0 00-1.172-2.828 1 1 0 010-1.415z\" clip-rule=\"evenodd\" />\n          </svg>\n          <div \n            class=\"w-24 h-2 bg-gray-700 rounded-full cursor-pointer relative group\"\n            (click)=\"onVolumeClick($event)\"\n          >\n            <div \n              class=\"absolute inset-y-0 left-0 bg-primary rounded-full\"\n              [style.width.%]=\"((playbackState$ | async)?.volume || 0) * 100\"\n            ></div>\n            <div class=\"absolute inset-y-0 w-3 h-3 bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                 [style.left.%]=\"((playbackState$ | async)?.volume || 0) * 100\">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n})\nexport class PlayerComponent {\n  currentTrack$: Observable<Track | null>;\n  playbackState$: Observable<{\n    isPlaying: boolean;\n    currentTime: number;\n    duration: number;\n    volume: number;\n  }>;\n  hasPreviousTrack$: Observable<boolean>;\n  hasNextTrack$: Observable<boolean>;\n\n  formatTime = formatTime;\n\n  constructor(private store: Store) {\n    this.currentTrack$ = this.store.select(fromTrack.selectCurrentTrack);\n    this.playbackState$ = this.store.select(fromTrack.selectPlaybackState);\n    this.hasPreviousTrack$ = this.store.select(fromTrack.selectHasPreviousTrack);\n    this.hasNextTrack$ = this.store.select(fromTrack.selectHasNextTrack);\n  }\n\n  togglePlayPause() {\n    this.store.select(fromTrack.selectCurrentTrack).subscribe(track => {\n      if (track) {\n        if (this.playbackState$) {\n          this.store.dispatch(TrackActions.pauseTrack());\n        } else {\n          this.store.dispatch(TrackActions.playTrack({ track }));\n        }\n      }\n    }).unsubscribe();\n  }\n\n  onProgressClick(event: MouseEvent) {\n    const element = event.currentTarget as HTMLElement;\n    const rect = element.getBoundingClientRect();\n    const ratio = (event.clientX - rect.left) / rect.width;\n    \n    this.playbackState$.subscribe(state => {\n      if (state.duration) {\n        this.store.dispatch(TrackActions.updateProgress({\n          currentTime: ratio * state.duration,\n          duration: state.duration\n        }));\n      }\n    }).unsubscribe();\n  }\n\n  onVolumeClick(event: MouseEvent) {\n    const element = event.currentTarget as HTMLElement;\n    const rect = element.getBoundingClientRect();\n    const ratio = (event.clientX - rect.left) / rect.width;\n    this.store.dispatch(TrackActions.setVolume({ volume: Math.max(0, Math.min(1, ratio)) }));\n  }\n\n  getProgress(current: number, total: number): number {\n    return total ? (current / total) * 100 : 0;\n  }\n\n  previousTrack() {\n    this.store.dispatch(TrackActions.previousTrack());\n  }\n\n  nextTrack() {\n    this.store.dispatch(TrackActions.nextTrack());\n  }\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}